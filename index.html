<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Click Worx - Cars for Sale</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{
  --red:#e60000;
  --red-dark:#c00000;
  --muted:#222;
}
html,body{height:100%; margin:0; font-family:Arial,sans-serif; background:#000; color:#fff;}
header{
  position:fixed; top:0; left:0; right:0; z-index:60;
  display:flex; justify-content:space-between; align-items:center;
  border-bottom:2px solid var(--red); border-radius:0 0 12px 12px;
  padding:12px 18px; background:rgba(0,0,0,0.78); backdrop-filter:blur(6px);
}
header h1{ margin:0; font-size:20px; color:var(--red); }
nav a{ color:#fff; text-decoration:none; margin-left:12px; font-weight:600; font-size:14px; }
nav a.admin{ background:var(--red); padding:6px 10px; border-radius:6px; }
.page-top{ height:64px; }

.slideshow{ position:fixed; inset:0; z-index:-1; overflow:hidden; }
.slideshow img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; transition:opacity 1s ease-in-out; }
.slideshow img.active{ opacity:1; }

.main-layout{
  display:flex; gap:12px; align-items:stretch; justify-content:center;
  padding:18px; max-width:1300px; margin:0 auto; box-sizing:border-box;
}
.side-box{
  width:120px; min-width:80px; height:320px;
  border-radius:8px; border:1px solid var(--red);
  background:rgba(255,255,255,0.04); display:flex; overflow:hidden;
}
.side-box img{ width:100%; height:100%; object-fit:cover; }

.search-section{
  flex:1; background:rgba(20,20,20,0.9); padding:25px;
  border-radius:10px; border:1px solid var(--red);
  display:flex; flex-direction:column; gap:15px;
}
.search-section h2{ margin:0; color:var(--red); text-align:center; }
.search-bar{ display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:10px; }
.search-bar input, .search-bar select, .search-bar textarea{
  padding:10px; border-radius:6px; border:none; font-size:14px; box-sizing:border-box; width:100%;
}
.search-bar textarea{ grid-column:1/-1; height:80px; resize:none; }
.search-btn{
  grid-column:1/-1; background:var(--red); color:#fff; padding:12px; border:none;
  border-radius:6px; cursor:pointer; font-weight:bold;
}
.search-btn:hover{ background:var(--red-dark); }

.urgent-sale-section{
  max-width:1300px; margin:26px auto; padding:14px;
  border-radius:10px; background:rgba(20,20,20,0.86); border:1px solid var(--red);
}
.urgent-sale-section h2{ color:var(--red); text-align:center; margin:0 0 12px; }
.cars-container{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; }
.car-card{
  background:rgba(30,30,30,0.85); border-radius:10px; padding:10px;
  border:1px solid var(--red); display:flex; flex-direction:column; justify-content:space-between; min-height:200px; position:relative; cursor:pointer;
}
.car-card img{ width:100%; height:120px; object-fit:cover; border-radius:6px; }
.ribbon{
  width:120px; background:var(--red); color:#fff; text-align:center; line-height:20px;
  font-size:12px; font-weight:bold; position:absolute; top:40px; left:-10px;
  transform:rotate(-45deg); box-shadow:0 2px 6px rgba(0,0,0,0.4); text-transform:uppercase;
}

.modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,0.92); z-index:120; align-items:center; justify-content:center; padding:20px; }
.modal.open{ display:flex; }
.modal-content{ width:100%; max-width:980px; max-height:92vh; background:#111; border-radius:10px; display:flex; flex-direction:column; }
.modal-body{ display:flex; gap:18px; flex:1; padding:18px; overflow:hidden; }
.modal-images{ flex-basis:45%; display:flex; flex-direction:column; gap:10px; overflow-y:auto; max-height:calc(92vh - 140px); }
.modal-images img{ width:100%; height:110px; object-fit:cover; border-radius:6px; cursor:pointer; }
.modal-images img.active{ height:340px; object-fit:contain; order:-1; }
.modal-details{ flex:1; overflow:auto; color:#ddd; font-size:14px; }
.close-btn{ position:absolute; right:12px; top:10px; font-size:26px; cursor:pointer; color:#fff; background:transparent; border:0; }

@media (max-width:900px){
  .main-layout{ flex-direction:column; align-items:center; }
  .side-box{ width:100%; height:160px; margin-top:12px; }
  .search-section{ width:100%; }
  .modal-body{ flex-direction:column; }
  .modal-images img.active{ height:260px; }
}
@media (max-width:600px){
  header{ padding:10px; }
  header h1{ font-size:18px; }
  nav a{ margin-left:8px; font-size:12px; }
  .side-box{ height:120px; }
  .modal-images img{ height:90px; }
  .modal-images img.active{ height:200px; }
}

@media (max-width:900px){
  .side-box img{
    width:100%;
    height:100%;
    object-fit:cover;
  }
}

@media (max-width:600px){
  .car-card img{
    height:120px; /* maintain height */
    object-fit:cover;
  }
}


</style>
</head>
<body>
<header>
  <h1>Click Worx</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="search.html">Search</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a class="admin" href="#" onclick="adminLogin()">Admin</a>
  </nav>
</header>
<div class="page-top"></div>

<div class="slideshow" aria-hidden="true">
  <img src="images/BG/01.jpg" class="active" alt="">
  <img src="images/BG/02.jpg" alt="">
  <img src="images/BG/03.jpg" alt="">
  <img src="images/BG/04.jpg" alt="">
</div>

<main class="main-layout">
  <aside class="side-box"><img id="leftBanner" src="" alt="Left banner"></aside>
  <div class="search-section">
    <h2>Search Cars</h2>
    <div class="search-bar">
      <input type="text" id="searchName" placeholder="Name of Car">
      <input type="text" id="searchModel" placeholder="Model">
      <input type="text" id="searchColor" placeholder="Color">
      <input type="text" id="searchSpecs" placeholder="Specs">
      <input type="text" id="searchEstate" placeholder="Estate">
      <input type="number" id="searchPrice" placeholder="Max Price">
      <textarea id="autosized-area" placeholder="Describe what you're looking for" maxlength="200"></textarea>
      <button class="search-btn" onclick="applySearch()">Search</button>
    </div>
  </div>
  <aside class="side-box"><img id="rightBanner" src="" alt="Right banner"></aside>
</main>

<section class="urgent-sale-section">
  <h2>Urgent Sale Cars</h2>
  <div id="carsContainer" class="cars-container"></div>
</section>

<!-- CAR MODAL -->
<div id="carModal" class="modal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeCarModal()">&times;</button>
    <div class="modal-body">
      <div class="modal-images" id="modalImages"></div>
      <div class="modal-details" id="modalDetails"></div>
    </div>
  </div>
</div>

<!-- Add this inside <body> just after your car modal -->
<!-- CONTACT MINI MODAL -->
<div id="contactModal" class="mini-modal">
  <div class="mini-content">
    <h2 style="color:#e60000">Car Inquiry</h2>
    <div class="form-row">
      <input type="text" id="contactCarName" placeholder="I'm interested in Car Name" readonly>
      <input type="text" id="contactName" placeholder="Your Name">
      <input type="text" id="contactNumber" placeholder="Contact No">
      <textarea id="contactMessage" placeholder="Your Message" rows="4"></textarea>
      <button class="submit-btn" onclick="submitContact()">Submit</button>
    </div>
  </div>
</div>
<style>
.mini-modal{ display:none; position:fixed; inset:0; z-index:140; align-items:center; justify-content:center; background:rgba(0,0,0,0.7); }
.mini-modal.open{ display:flex; }
.mini-content{ width:100%; max-width:520px; background:#111; border-radius:10px; padding:16px; color:#fff; }
.form-row input, .form-row textarea{ width:100%; padding:10px; margin-bottom:8px; border-radius:6px; border:0; background:#141414; color:#fff; box-sizing:border-box; }
.submit-btn{ background:var(--red); color:#fff; border:0; padding:10px 14px; border-radius:6px; cursor:pointer; font-weight:700; width:100%; }
</style>


<script>
const slides = document.querySelectorAll('.slideshow img');
let curSlide = 0;
setInterval(()=>{ slides[curSlide].classList.remove('active'); curSlide=(curSlide+1)%slides.length; slides[curSlide].classList.add('active'); },4000);

function renderCars(cars){
  const container = document.getElementById("carsContainer");
  container.innerHTML = "";
  cars.forEach((car,i)=>{
    const card = document.createElement("div");
    card.className="car-card";
    card.innerHTML = `
      ${car.ribbon ? `<div class="ribbon">${car.ribbon}</div>` : ""}
      <img src="${car.images && car.images.length>0 ? car.images[0] : 'images/noimage.png'}" alt="${car.name}">
      <h3>${car.name}</h3>
      <p>Model: ${car.model}</p>
      <p>${car.specs}</p>
      <p>Price: AED ${car.price} ${car.negotiable?'(Negotiable)':''}</p>
    `;
    card.onclick = ()=>openCar(i);
    container.appendChild(card);
  });
}

function openCar(index){
  const cars = JSON.parse(localStorage.getItem("cars")||"[]");
  const car = cars[index];
  if(!car) return;
  const modal = document.getElementById("carModal");
  const imagesDiv = document.getElementById("modalImages");
  const detailsDiv = document.getElementById("modalDetails");
  imagesDiv.innerHTML="";
  detailsDiv.innerHTML="";
  const imgs = car.images && car.images.length>0 ? car.images : ["images/noimage.png"];
  imgs.forEach((src,i)=>{
    const img=document.createElement("img");
    img.src=src;
    if(i===0) img.classList.add("active");
    img.onclick=()=>{ imagesDiv.querySelectorAll("img").forEach(im=>im.classList.remove("active")); img.classList.add("active"); };
    imagesDiv.appendChild(img);
  });
  detailsDiv.innerHTML = `
    <h2 style="color:#e60000">${car.name || ''} ${car.model || ''}</h2>
    <p><strong>Price:</strong> AED ${car.price || ''} ${car.negotiable?'(Negotiable)':''}</p>
    <p><strong>Color:</strong> ${car.color || ''}</p>
    <p><strong>Mileage:</strong> ${car.mileage || ''}</p>
    <p><strong>Milkiya:</strong> ${car.milkiya || ''}</p>
    <p><strong>Accident History:</strong> ${car.accident || ''}</p>
    <p><strong>Location:</strong> ${car.location || ''}</p>
    <p><strong>Specs:</strong> ${car.specs || ''}</p>
    ${car.features?`<p><strong>Features:</strong> ${car.features}</p>`:""}
    ${car.ribbon?`<p><strong>Ribbon:</strong> ${car.ribbon}</p>`:""}
  `;
  modal.classList.add("open");
}

function closeCarModal(){ document.getElementById("carModal").classList.remove("open"); }

document.addEventListener("DOMContentLoaded",()=>{
  const left=localStorage.getItem("leftBanner");
  const right=localStorage.getItem("rightBanner");
  if(left) document.getElementById("leftBanner").src=left;
  if(right) document.getElementById("rightBanner").src=right;
  const cars = JSON.parse(localStorage.getItem("cars")||"[]");
  renderCars(cars);
});

function openCar(index){
  const cars = JSON.parse(localStorage.getItem("cars")||"[]");
  const car = cars[index];
  if(!car) return;
  const modal = document.getElementById("carModal");
  const imagesDiv = document.getElementById("modalImages");
  const detailsDiv = document.getElementById("modalDetails");
  imagesDiv.innerHTML="";
  detailsDiv.innerHTML="";
  const imgs = car.images && car.images.length>0 ? car.images : ["images/noimage.png"];
  imgs.forEach((src,i)=>{
    const img=document.createElement("img");
    img.src=src;
    if(i===0) img.classList.add("active");
    img.onclick=()=>{ imagesDiv.querySelectorAll("img").forEach(im=>im.classList.remove("active")); img.classList.add("active"); };
    imagesDiv.appendChild(img);
  });
  detailsDiv.innerHTML = `
    <h2 style="color:#e60000">${car.name || ''} ${car.model || ''}</h2>
    <p><strong>Price:</strong> AED ${car.price || ''} ${car.negotiable?'(Negotiable)':''}</p>
    <p><strong>Color:</strong> ${car.color || ''}</p>
    <p><strong>Mileage:</strong> ${car.mileage || ''}</p>
    <p><strong>Milkiya:</strong> ${car.milkiya || ''}</p>
    <p><strong>Accident History:</strong> ${car.accident || ''}</p>
    <p><strong>Location:</strong> ${car.location || ''}</p>
    <p><strong>Specs:</strong> ${car.specs || ''}</p>
    ${car.features?`<p><strong>Features:</strong> ${car.features}</p>`:""}
    ${car.ribbon?`<p><strong>Ribbon:</strong> ${car.ribbon}</p>`:""}
    <button class="submit-btn" style="margin-top:10px;" onclick="openContact('${car.name}')">Want This</button>
  `;
  modal.classList.add("open");
}

// Open contact modal with car name auto-filled
function openContact(carName){
  document.getElementById("contactCarName").value = carName;
  document.getElementById("contactModal").classList.add("open");
  closeCarModal(); // optionally close car modal
}

// Close contact modal
function closeContact(){ document.getElementById("contactModal").classList.remove("open"); }

// Simulated submit function
function submitContact(){
  const carName = document.getElementById("contactCarName").value;
  const name = document.getElementById("contactName").value;
  const number = document.getElementById("contactNumber").value;
  const message = document.getElementById("contactMessage").value;

  if(!name || !number){
    alert("Please fill your Name and Contact No.");
    return;
  }

  // You can replace this with Formspree or server logic
  console.log("Contact submitted:", {carName,name,number,message});
  alert("Your inquiry has been submitted!");
  closeContact();
}

document.addEventListener("DOMContentLoaded", () => {
  // SLIDESHOW
  const slides = document.querySelectorAll('.slideshow img');
  let curSlide = 0;
  setInterval(()=>{ 
    slides[curSlide].classList.remove('active'); 
    curSlide = (curSlide+1)%slides.length; 
    slides[curSlide].classList.add('active'); 
  },4000);

  // BANNERS
  const left = localStorage.getItem("leftBanner");
  const right = localStorage.getItem("rightBanner");
  if(left) document.getElementById("leftBanner").src = left;
  if(right) document.getElementById("rightBanner").src = right;

  // CARS
  const cars = JSON.parse(localStorage.getItem("cars")||"[]");
  renderCars(cars);
});

console.log("Left banner:", left, "Right banner:", right);
console.log("Cars array:", cars);


// Optional: implement applySearch() if needed later
</script>
</body>
</html>
